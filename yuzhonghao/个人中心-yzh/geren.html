<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="./geren.css">
</head>

<body>
  <div class="head clearFloat">
    <div class="headL">
      <ul class="headList">
        <li><a href="">我的专业</a></li>
        <li><a href="">我的课堂</a></li>
        <li><a href="">我的成长</a></li>
        <li><a href="">我的参与</a></li>
        <li><a href="">我的考试</a></li>
      </ul>
    </div>
    <div class="headR">
      <div class="tit">X</div>
      <div class="uname">yzh</div>
      <div class="btn">在线提交</div>
      <div class="goUp">X</div>
    </div>
  </div>
  <!-- 选择框 -->
  <div class="nav_box">
    <div class="z-nav">
      <div class="z-navn">
        <div class="banenr_showMsg">
          <p>个人中心</p>
        </div>
      </div>
    </div>
    <div class="select_box">
      <div class="select_item active" data-switch="0">基本资料</div>
      <div class="select_item" data-switch="1">修改密码</div>
      <div class="select_item" data-switch="2">意见反馈</div>
    </div>
  </div>
  <div class="main_box">
    <div class="main_box_one">
      <div class="basic_data">
        <p class="basic_data_tit">基本资料</p>
        <div class="basic_data_msg">
          <!-- 第一行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                姓名
              </div>
              <div class="left_msg">
                于忠浩
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                学号
              </div>
              <div class="right_msg">
                20172205112
              </div>
            </div>
          </div>
          <!-- 第二行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                专业
              </div>
              <div class="left_msg">
                WEB前端开发
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                班级
              </div>
              <div class="right_msg">
                1722051联想班
              </div>
            </div>
          </div>
          <!-- 第三行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                学校身份
              </div>
              <div class="left_msg">
                学生
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                职场身份
              </div>
              <div class="right_msg">
                董事长
              </div>
            </div>
          </div>
          <!-- 第四行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                学校
              </div>
              <div class="left_msg">
                清华大学
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                性别
              </div>
              <div class="right_msg">
                男
              </div>
            </div>
          </div>
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                民族
              </div>
              <div class="left_msg">
                汉族
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                出生日期
              </div>
              <div class="right_msg">
                1999.7.15
              </div>
            </div>
          </div>
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                身份证号
              </div>
              <div class="left_msg">
                xxxxxxxxxxxx
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                籍贯
              </div>
              <div class="right_msg">
                汉
              </div>
            </div>
          </div>
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                邮箱
              </div>
              <div class="left_msg">

              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                家庭电话
              </div>
              <div class="right_msg">

              </div>
            </div>
          </div>
          <!-- 第八行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat">
              <div class="left_tit">
                手机
              </div>
              <div class="left_msg">
                xxxxxxxx
              </div>
            </div>
            <div class="item_right clearFloat">
              <div class="right_tit">
                入学时间
              </div>
              <div class="right_msg">
                2017/9/15
              </div>
            </div>
          </div>
          <!-- 最后一行 -->
          <div class="basic_data_item clearFloat">
            <div class="item_left clearFloat" style="width: 92.2%;">
              <div class="left_tit" style="width: 14.6%;">
                家庭住址
              </div>
              <div class="left_msg">
                NB
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <div class="main_box_two">
      <div class="box_two_tit">
        <div class="sproinnernewrevisetitle"><strong class="c4ac0e0">---</strong><span class="dib ">
            <b class="dib c4ac0e0">修改密码</b></span>
          <strong class="c4ac0e0">---</strong><strong class="spro-revisestrongtwo">---</strong>
          <span class="dib ">
            <b class="dib c-aeaeb0 spro-revbtwo">完成</b></span><strong>---</strong></div>
      </div>
      <div class="box_two_msg">
        <p>请输入你的原密码</p>
        <input type="password" placeholder="请输入你的原密码">
        <p>请输入你的新密码</p>
        <input type="password" placeholder="请输入你的新密码">
        <p style="font-size: 12px;color:#acacac;"><i style="color: rgb(251, 79, 69);">*</i>
          密码为8-20位，必须使用大小写字母、数字与特殊符号的组合
        </p>
        <input type="password" placeholder="请输入你的新密码">
      </div>
      <div class="box_two_btn">确认修改</div>
    </div>
    <div class="main_box_three">
        <div class="box_two_tit clearFloat">
            <div class="tit">意见反馈</div>
            <div class="btn" id="newBtn" data-toggle="main_box_three1">新建反馈</div>
          </div>
          <!-- box1 -->
      <div class="main_box_three1">
        
        <div class="box_two_msg">
          <div class="two_msg_tit clearFloat">
            <div>意见</div>
            <div>发起时间</div>
            <div>状态</div>
            <div>操作</div>
          </div>
          <div class="msg_box">
            <div class="msg_item">
              <div class="msg_item_tit clearFloat">
                <div>Lorem, ipsum dolor slit. Id optio magni ab a dignissimos fuga?</div>
                <div>2019-09-06</div>
                <div>已回复</div>
                <div>展开问题</div>
              </div>
              <div class="msg_item_msg clearFloat">
                <div class="msg_item_msg_cont">Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel quia
                  quibusdam, quae maiores voluptatum animi vero perferendis magni doloremque delectus. Voluptatibus
                  aspernatur in et eum ratione dicta aut laboriosam nulla.</div>
                <div class="msg_item_msg_time">2019-09-07</div>
              </div>
            </div>
            <div class="msg_item">
              <div class="msg_item_tit clearFloat">
                <div>Maxime unde cupiditatecta repellendus atque!</div>
                <div>2019-08-16</div>
                <div>已回复</div>
                <div>展开问题</div>
              </div>
              <div class="msg_item_msg clearFloat">
                <div class="msg_item_msg_cont">Lorem ipsum dolor sit amet consectetur adipisicing elit. Vel quia
                  quibusdam, quae maiores voluptatum animi vero perferendis magni doloremque delectus. Voluptatibus
                  aspernatur in et eum ratione dicta aut laboriosam nulla.</div>
                <div class="msg_item_msg_time">2019-09-07</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- box2 -->
      <div class="main_box_three2">
        <div class="select clearFloat">
          <div class="select_cont">
            <i style="color:#ff0000">*</i>
            问题分类：
          </div>
          <div class="select_option">
            <select name="" id="">
              <option value="">用户体验</option>
              <option value="">产品bug</option>
              <option value="">功能建议</option>
              <option value="">问卷建议</option>
            </select>
          </div>
        </div>
        <div class="ipt">
          <div class="select_cont">
            <i style="color:#ff0000">*</i>
            意见：
          </div>
          <div class="ipt_cont">
            <input type="text" placeholder="请在这里输入你的问题(60个字符以内)">
          </div>
        </div>
        <div class="wt_text">
            <div class="select_cont">
                问题说明：
            </div>
            <div class="text_cont">
              <textarea name="" id="" cols="30" rows="10" placeholder="问题背景、条件等详细信息"></textarea>
            </div>
        </div>
        <div class="btn">提交反馈</div>
      </div>
    </div>

  </div>
</body>
<script>
  // 实现标签页切换
  var selects = document.querySelectorAll('.select_box .select_item');
  for (var i = 0; i < selects.length; i++) {
    selects[i].onclick = (e) => {
      // 按钮样式切换
      var selectAct = document.querySelector('.select_item.active');
      selectAct.className = "select_item";
      e.target.className = "select_item active";
      // box 内容切换
      var mainBoxs = document.querySelectorAll('.main_box>div');
      var index = e.target.dataset.switch;
      for (var i = 0; i < mainBoxs.length; i++) {
        mainBoxs[i].style.display = "none";
      }
      mainBoxs[index].style.display = "block";
    }
  }

  // 展开问题功能
  var wtBtn = document.querySelectorAll('.msg_box .msg_item .msg_item_tit div:nth-child(4)');
  for (var i = 0; i < wtBtn.length; i++) {
    wtBtn[i].onclick = (e) => {
      var msgItemCont = e.target.parentElement.parentElement.lastElementChild;
      // 获取该元素display属性
      var contVal = window.getComputedStyle(msgItemCont, null).display;
      if (contVal == 'none') {
        msgItemCont.style.display = 'block';
        e.target.innerHTML = '收起问题';
      } else {
        msgItemCont.style.display = 'none';
        e.target.innerHTML = '展开问题';
      }
    }
  }

  // 新建反馈功能
  var newBtn = document.getElementById('newBtn');
  newBtn.onclick = (e) => {
    var dataTog = e.target.dataset.toggle;
    if(dataTog == 'main_box_three1') {
      var box = document.querySelector(`.${dataTog}`);
      box.style.display="none"
      e.target.dataset.toggle = 'main_box_three2';
      box = document.querySelector(`.${e.target.dataset.toggle}`);
      box.style.display="block";
      e.target.innerHTML = "我的意见"
    }else {
      var box = document.querySelector(`.${dataTog}`);
      box.style.display="none";
      e.target.dataset.toggle = 'main_box_three1';
      box = document.querySelector(`.${e.target.dataset.toggle}`);
      box.style.display="block";
      e.target.innerHTML = "新建反馈"
    }
  }
    // 点击提交反馈 跳转页面
    var subBtn = document.querySelector('.main_box_three2 .btn');
  subBtn.onclick = () => {
    var box1 = document.querySelector('.main_box_three1');
    var box2 = document.querySelector('.main_box_three2');
    box2.style.display = 'none';
    box1.style.display = 'block';

    // 取到用户输入的值，创建
    var textVal = document.querySelector('.main_box_three2 .ipt_cont input').value;
    var areaVal = document.querySelector('.main_box_three2 textarea').value;
    // 处理时间格式
    var now = new Date();
    var year = now.getFullYear();
    var months = now.getMonth() + 1 + '';
    if (months.length == 1) {
      months = "0" + months;
    }
    var days = '' + now.getDate();
    if (days.length == 1) {
      days = '0' + days;
    }
    var time = `${year}-${months}-${days}`;
    // 新建div 放到box里
    var newDiv = document.createElement('div');
    newDiv.className = 'msg_item';
    var divBox = document.querySelectorAll('.msg_box .msg_item');
    var str = `
      <div class="msg_item_tit clearFloat">
        <div>${textVal}</div>
        <div>${time}</div>
        <div>未回复</div>
        <div>展开问题</div>
      </div>
      <div class="msg_item_msg clearFloat">
        <div class="msg_item_msg_cont">${areaVal}</div>
        <div class="msg_item_msg_time">${time}</div>
      </div>
    `;
    newDiv.innerHTML = str;
    newDiv.firstElementChild.lastElementChild.onclick = wtBtnClick;
    divBox[0].parentElement.insertBefore(newDiv, divBox[0])

    // 清空页面的值
    var selBtn = document.querySelector('.main_box_three2 select');
    selBtn.value = '1';
    var textBtn = document.querySelector('.main_box_three2 input[type=text]');
    textBtn.value = '';
    var textareaBtn = document.querySelector('.main_box_three2 textarea');
    textareaBtn.value = '';
  }
</script>

</html>